<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="commonCode">
	<select id="selectCodeList" parameterType="com.gen.script.sys.code.domain.CommonCodeDTO" resultType="com.gen.script.sys.code.domain.CommonCodeDTO">
		SELECT
			CODE,
			CODE_NAME,
			CODE_DESC,
			SORT_SEQ
		FROM PGI_COMMON_CODE
		WHERE 1=1
		<if test="code != null">
			AND CODE = #{code}
		</if>
		ORDER BY SORT_SEQ
	</select>
	
	<insert id="insertCode" parameterType="com.gen.script.sys.code.domain.CommonCodeDTO">
		INSERT INTO PGI_COMMON_CODE(
			CODE
			, CODE_NAME
			, CODE_DESC
			, SORT_SEQ
			, INS_ID
			, INS_DT
			, UPD_ID
			, UPD_DT
		)VALUES(
			#{code}
			, #{codeName}
			, #{codeDesc}
			, #{sortSeq}
			, #{insId}
			, #{insDt}
			, #{updId}
			, #{updDt}
		)
	</insert>
	
	<update id="updateCode" parameterType="com.gen.script.sys.code.domain.CommonCodeDTO">
		UPDATE PGI_COMMON_CODE SET
			CODE_DESC		= #{codeDesc}
			, CODE_NAME		= #{codeName}
			, SORT_SEQ		= #{sortSeq}
			, UPD_ID		= #{updId}
			, UPD_DT		= #{updDt}
		WHERE CODE = #{code}
	</update>
	
	<delete id="deleteCode" parameterType="com.gen.script.sys.code.domain.CommonCodeDTO">
		DELETE FROM PGI_COMMON_CODE
		WHERE CODE = #{code}
	</delete>

	<select id="selectCodeDetailList" parameterType="com.gen.script.sys.code.domain.CommonCodeDTO" resultType="com.gen.script.sys.code.domain.CommonCodeDTO">
		SELECT
			CODE,
			CODE_DESC,
			CODE_DETAIL_CD,
			CODE_DETAIL_NAME,
			SORT_sEQ
		FROM PGI_COMMON_CODE_DETAIL
		WHERE CODE = #{code}
		ORDER BY SORT_SEQ
	</select>

	<insert id="insertCodeDetail" parameterType="com.gen.script.sys.code.domain.CommonCodeDTO">
		INSERT INTO PGI_COMMON_CODE_DETAIL(
			CODE
			, CODE_DESC
			, CODE_DETAIL_CD
			, CODE_DETAIL_NAME
			, SORT_SEQ
			, INS_ID
			, INS_DT
			, UPD_ID
			, UPD_DT
		)VALUES(
			#{code}
			, #{codeDesc}
			, #{codeDetailCd}
			, #{codeDetailName}
			, #{sortSeq}
			, #{insId}
			, #{insDt}
			, #{updId}
			, #{updDt}
		)
	</insert>
	
	<update id="updateCodeDetail" parameterType="com.gen.script.sys.code.domain.CommonCodeDTO">
		UPDATE PGI_COMMON_CODE_DETAIL SET
			CODE_DESC			= #{codeDesc}
			, CODE_DETAIL_CD	= #{codeDetailCd}
			, CODE_DETAIL_NAME	= #{codeDetailName}
			, SORT_SEQ			= #{sortSeq}
			, UPD_ID			= #{updId}
			, UPD_DT			= #{updDt}
		WHERE 1=1
		<if test="code != null and codeDetailCd != null">
			AND CODE			= #{code}
			AND CODE_DETAIL_CD	= #{codeDetailCd}
		</if>
	</update>
	
	<delete id="deleteCodeDetail" parameterType="com.gen.script.sys.code.domain.CommonCodeDTO">
		DELETE FROM PGI_COMMON_CODE_DETAIL
		WHERE 	CODE			= #{code}
			AND CODE_DETAIL_CD	= #{codeDetailCd}
	</delete>
</mapper>